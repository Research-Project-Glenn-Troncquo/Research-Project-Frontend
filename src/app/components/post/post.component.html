<div
  class="bg-white rounded-sm p-6 pt-3 shadow-md mb-6 transition-all duration-1000 ease-out"
>
  <div class="flex gap-2 items-center mb-6">
    <img
      class="h-10 cursor-pointer w-10 rounded-full"
      [src]="
        post.user?.img_url
          ? post.user?.img_url
          : '../../../assets/no-profile.png'
      "
      alt="profile picture of user"
    />
    <div>
      <p
        class="font-semibold transition-all ease-out duration-200 hover:text-p-orange cursor-pointer"
      >
        {{ user!.username }}
      </p>
      <p class="text-gray-400 text-xs -mt-1">
        {{ post!.date | date: 'fullDate' }} at
        {{ post!.date | date: 'shortTime' }}
      </p>
    </div>
  </div>

  <div class="flex gap-2 mb-6">
    <p class="w-10 text-center items-start leading-6 cursor-default">üç∫</p>
    <div>
      <h3
        class="font-semibold text-2xl leading-6 mb-4 transition-all ease-out duration-200 hover:text-p-orange cursor-pointer word-break"
        (click)="handlePostEmit(post)"
      >
        {{ post.title }}
      </h3>
      <p class="transition-all ease-out duration-200 word-break">
        {{ post.description }}
      </p>
    </div>
  </div>

  <div class="mb-6">
    <img
      class="max-w-full max-h-96 mx-auto object-cover img"
      [src]="post.img_url ? post.img_url : '../../../assets/beer-sfeerfoto.png'"
      alt="atmospheric picture"
    />
  </div>

  <div
    class="flex justify-between items-center transition-all ease-out duration-300 pb-4 border-b-2"
  >
    <p
      class="text-gray-400 text-sm cursor-pointer hover:underline"
      (click)="handleLikesClick(post)"
    >
      {{ post?.likes?.length }} likes
    </p>
    <!-- <div class="flex gap-2">
      <button
        class="bg-gray-100 p-2 rounded-md px-3 hover:bg-white border-2 border-gray-100"
        (click)="handleLike()"
      >
        <svg
          [@bounceIn]="animationState"
          class=""
          [class.liked]="postLiked"
          [class.notliked]="!postLiked"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 16 16"
          width="16"
          height="16"
        >
          <style></style>
          <g id="actions_kudo_highlighted_xsmall_svg__Icons">
            <path
              d="M3.263 8.251l-2.122.816a1 1 0 00-.567 1.311l1.833 4.5a1 1 0 001.305.548l2.121-.868-2.57-6.307zM14.786 6.799a1.26 1.26 0 00-.294-.8 1.457 1.457 0 00-.718-.443 2.25 2.25 0 00-.39-.056H9.021c.232-.778.572-2.035.572-2.734 0-1.521-1.409-2.191-1.469-2.219a.497.497 0 00-.705.385L7.122 3.1 4.624 7.731l-.013.002-.415.16 2.561 6.287.44-.18H11.9a.493.493 0 00.215-.055 1.494 1.494 0 001.164-1.268l.242-1.696a.75.75 0 01.24-.451c.398-.359.609-.815.609-1.319 0-.299-.143-.549-.144-.552a.751.751 0 01.169-.99c.163-.128.391-.522.391-.87z"
            ></path>
          </g>
        </svg>
      </button>
      <button
        class="bg-gray-100 p-2 rounded-md px-3 hover:bg-white border-2 border-gray-100 transition-all duration-150 ease-out"
        (click)="toggleComment()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 16 16"
          fill="currentColor"
          width="16"
          height="16"
        >
          <path
            d="M14 1H2a1 1 0 00-1 1v10a1 1 0 001 1h3.59l1.71 1.71a1 1 0 001.41 0l1.7-1.71H14a1 1 0 001-1V2a1 1 0 00-1-1zm0 11h-4l-2 2-2-2H2V2h12z"
          ></path>
          <path d="M4 5h8v1H4zM4 8h4v1H4z"></path>
        </svg>
      </button>
    </div>  -->
    <app-like-comment
      (emitCommentEvent)="toggleComment()"
      [showCommentButton]="true"
      [post]="post"
      [user]="loggedInUser"
    ></app-like-comment>
  </div>

  <div>
    <div
      *ngIf="post!.comments!.length > 0"
      class="transition-all duration-300 ease-out overflow-y-auto mt-4 w-full max-h-20 h-full"
    >
      <div
        @fadeIn
        *ngFor="let comment of post.comments"
        class="flex gap-2 mb-2"
      >
        <div class="w-[34px]">
          <img
            class="h-6 w-6 mt-[2px] rounded-full"
            [src]="
              comment.user?.img_url
                ? comment.user?.img_url
                : '../../../assets/no-profile.png'
            "
            alt="profile picture of the user"
          />
        </div>
        <div class="w-full delete-hover">
          <div class="flex justify-between items-center">
            <h3 class="text-sm font-semibold">{{ comment.user?.username }}</h3>
            <p
              *ngIf="comment.user!.user_id === loggedInUser.user_id"
              class="text-p-orange hover text-xs cursor-pointer mr-1"
              (click)="deleteComment(comment)"
            >
              Delete
            </p>
          </div>
          <p class="text-sm word-break">{{ comment.comment }}</p>
        </div>
      </div>
    </div>
  </div>

  <div>
    <div
      class="flex mt-4 gap-2 items-start transition-all duration-300 ease-out"
      [class.h-0]="!showComment"
      [class.h-20]="showComment"
      [@listAnimation]="showComment"
    >
      <div class="w-[34px]">
        <img
          *ngIf="showComment"
          class="h-6 w-6 mt-2 rounded-full block"
          [src]="
            loggedInUser?.img_url
              ? loggedInUser?.img_url
              : '../../../assets/no-profile.png'
          "
          alt="profile picture of the user"
        />
      </div>

      <div class="w-full fle">
        <textarea
          *ngIf="showComment"
          class="input text-gray-700 box-border h-20 p-2 w-full outline-none resize-none hover:bg-gray-100 active:bg-gray-100 focus:bg-gray-100"
          placeholder="Add a comment"
          [(ngModel)]="textAreaValue"
        ></textarea>
        <p
          *ngIf="showComment"
          class="text-p-orange cursor-pointer hover:bg-yellow-600 hover:bg-opacity-20 rounded-md p-2 px-4"
          (click)="handleComment()"
        >
          Post
        </p>
      </div>
    </div>
  </div>
</div>
